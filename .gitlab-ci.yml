pages:
  stage: deploy
  script:
    - WALLPAPERS=$(find src -maxdepth 1 -type f \( -name "*.png" -o -name "*.jpg" -o -name "*.jpeg" -o -name "*.gif" -o -name "*.webp" \) -printf '{"full":"src/%P","thumbnail":"src/thumbnails/%P"},')
    - WALLPAPERS="[${WALLPAPERS%,}]"
    - sed -i "s|const wallpapers = \[];|const wallpapers = ${WALLPAPERS};|" index.html
    - mkdir .public
    - cp -r * .public
    - mv .public public
  artifacts:
    paths:
      - public
  only:
    - main
